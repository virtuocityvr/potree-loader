{"version":3,"file":"potree-loader.es21.js","sources":["../src/features.ts"],"sourcesContent":["const canvas = document.createElement('canvas');\r\nconst gl: WebGLRenderingContext | null = canvas.getContext('webgl');\r\n\r\nexport const FEATURES = {\r\n  SHADER_INTERPOLATION: hasExtension('EXT_frag_depth') && hasMinVaryingVectors(8),\r\n  SHADER_SPLATS:\r\n    hasExtension('EXT_frag_depth') && hasExtension('OES_texture_float') && hasMinVaryingVectors(8),\r\n  SHADER_EDL: hasExtension('OES_texture_float') && hasMinVaryingVectors(8),\r\n  precision: getPrecision(),\r\n};\r\n\r\nfunction hasExtension(ext: string) {\r\n  return gl !== null && Boolean(gl.getExtension(ext));\r\n}\r\n\r\nfunction hasMinVaryingVectors(value: number) {\r\n  return gl !== null && gl.getParameter(gl.MAX_VARYING_VECTORS) >= value;\r\n}\r\n\r\nfunction getPrecision() {\r\n  if (gl === null) {\r\n    return '';\r\n  }\r\n\r\n  const vsHighpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT);\r\n  const vsMediumpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT);\r\n\r\n  const fsHighpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT);\r\n  const fsMediumpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT);\r\n\r\n  const highpAvailable =\r\n    vsHighpFloat && fsHighpFloat && vsHighpFloat.precision > 0 && fsHighpFloat.precision > 0;\r\n\r\n  const mediumpAvailable =\r\n    vsMediumpFloat &&\r\n    fsMediumpFloat &&\r\n    vsMediumpFloat.precision > 0 &&\r\n    fsMediumpFloat.precision > 0;\r\n\r\n  return highpAvailable ? 'highp' : mediumpAvailable ? 'mediump' : 'lowp';\r\n}\r\n"],"names":["canvas","gl","FEATURES","hasExtension","hasMinVaryingVectors","getPrecision","ext","value","vsHighpFloat","vsMediumpFloat","fsHighpFloat","fsMediumpFloat","highpAvailable","mediumpAvailable"],"mappings":"AAAA,MAAMA,IAAS,SAAS,cAAc,QAAQ,GACxCC,IAAmCD,EAAO,WAAW,OAAO,GAErDE,IAAW;AAAA,EACtB,sBAAsBC,EAAa,gBAAgB,KAAKC,EAAqB,CAAC;AAAA,EAC9E,eACED,EAAa,gBAAgB,KAAKA,EAAa,mBAAmB,KAAKC,EAAqB,CAAC;AAAA,EAC/F,YAAYD,EAAa,mBAAmB,KAAKC,EAAqB,CAAC;AAAA,EACvE,WAAWC,EAAa;AAC1B;AAEA,SAASF,EAAaG,GAAa;AACjC,SAAOL,MAAO,QAAQ,EAAQA,EAAG,aAAaK,CAAG;AACnD;AAEA,SAASF,EAAqBG,GAAe;AAC3C,SAAON,MAAO,QAAQA,EAAG,aAAaA,EAAG,mBAAmB,KAAKM;AACnE;AAEA,SAASF,IAAe;AACtB,MAAIJ,MAAO;AACF,WAAA;AAGT,QAAMO,IAAeP,EAAG,yBAAyBA,EAAG,eAAeA,EAAG,UAAU,GAC1EQ,IAAiBR,EAAG,yBAAyBA,EAAG,eAAeA,EAAG,YAAY,GAE9ES,IAAeT,EAAG,yBAAyBA,EAAG,iBAAiBA,EAAG,UAAU,GAC5EU,IAAiBV,EAAG,yBAAyBA,EAAG,iBAAiBA,EAAG,YAAY,GAEhFW,IACJJ,KAAgBE,KAAgBF,EAAa,YAAY,KAAKE,EAAa,YAAY,GAEnFG,IACJJ,KACAE,KACAF,EAAe,YAAY,KAC3BE,EAAe,YAAY;AAEtB,SAAAC,IAAiB,UAAUC,IAAmB,YAAY;AACnE;"}